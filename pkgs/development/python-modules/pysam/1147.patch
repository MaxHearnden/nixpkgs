From e999314d9e0c8da067e8edcd0c81f42fa63c6ba5 Mon Sep 17 00:00:00 2001
From: Nicolas Ochsner <nicolas.ochsner@env.ethz.ch>
Date: Thu, 10 Nov 2022 12:05:09 +0100
Subject: [PATCH] Get shared object suffix from `EXT_SUFFIX`

---
 cy_build.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/cy_build.py b/cy_build.py
index 2726e947..ec65afd7 100644
--- a/cy_build.py
+++ b/cy_build.py
@@ -8,7 +8,7 @@
     from setuptools.command.build_ext import build_ext
 
 from distutils.extension import Extension
-from distutils.sysconfig import get_config_vars, get_python_version
+from distutils.sysconfig import get_config_var, get_config_vars, get_python_version
 from pkg_resources import Distribution
 
 
@@ -66,7 +66,7 @@ def build_extension(self, ext):
             # @loader_path. This will allow Python packages to find the library
             # in the expected place, while still giving enough flexibility to
             # external applications to link against the library.
-            relative_module_path = ext.name.replace(".", os.sep) + get_config_vars()["SO"]
+            relative_module_path = ext.name.replace(".", os.sep) + get_config_var("EXT_SUFFIX")
             library_path = os.path.join(
                 "@rpath", os.path.basename(relative_module_path)
             )
